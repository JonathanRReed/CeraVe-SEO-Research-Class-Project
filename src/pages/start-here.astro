---
import BaseLayout from '../layouts/BaseLayout.astro';
import GuideTemplate from '../components/templates/GuideTemplate.astro';
import { siteMap } from '../data/siteMap';
import { getCollection } from 'astro:content';

const guides = await getCollection('guides');
const entry = guides.find((guide) => guide.slug === 'start-here');

if (!entry) {
  throw new Error('Guide entry for start-here not found');
}

const breadcrumbs = [
  siteMap.find((item) => item.url === '/'),
  siteMap.find((item) => item.url === '/start-here'),
].filter((item): item is typeof siteMap[number] => Boolean(item));
---

<BaseLayout
  title="Start a 3-step routine"
  description={entry.data.description}
  keywords={entry.data.keywords}
  breadcrumbs={breadcrumbs}
>
  <GuideTemplate entry={entry} />
</BaseLayout>
